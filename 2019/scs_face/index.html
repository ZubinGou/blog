<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="ZubinGou">
  <meta name="description" content="ZubinGou 的个人网站">
  <meta name="keywords" content="zubin, blog, Hugo, python, philosophy, books">
  
  <link rel="prev" href="https://zubing.tk/2019/blog/" />
  
  <link rel="shortcut icon" href="/images/me/puppy.jpg"/>
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
  <link rel="canonical" href="https://zubing.tk/2019/scs_face/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           2019北邮计算机学院新生颜值分析 | Zubin`s Site
       
  </title>
  <meta name="title" content="2019北邮计算机学院新生颜值分析 | Zubin`s Site">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">

 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/zubing.tk"
    },
    "articleSection" : "posts",
    "name" : "2019北邮计算机学院新生颜值分析",
    "headline" : "2019北邮计算机学院新生颜值分析",
    "description" : "声明：为保护个人隐私，本博文不提供任何学生的个人信息。 偶得管理员账号🤐，分析2019计算机学院迎新页面找到了新生头像存放位置，正好赋闲，于是",
    "inLanguage" : "zh-cn",
    "author" : "ZubinGou",
    "creator" : "ZubinGou",
    "publisher": "ZubinGou",
    "accountablePerson" : "ZubinGou",
    "copyrightHolder" : "ZubinGou",
    "copyrightYear" : "2019",
    "datePublished": "2019-08-23 12:03:18 \x2b0800 CST",
    "dateModified" : "2019-08-23 12:03:18 \x2b0800 CST",
    "url" : "https:\/\/zubing.tk\/2019\/scs_face\/",
    "wordCount" : "1297",
    "keywords" : [ "Python","Crawler","Data Analysis","BUPT", "Zubin`s Site"]
}
</script>

</head>

  


  <body class="dark-theme">
    <div class="wrapper">
        <nav class="navbar">
    
        <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://zubing.tk">Zubin`s Site</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" class="theme-switch"><i class="fa fa-moon-o"></i></a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href=" /posts/" title="">Blog</a>
                
                <a class="menu-item" href=" /categories/" title="">Categories</a>
                
                <a class="menu-item" href=" /tags/" title="">Tags</a>
                
                <a class="menu-item" href=" /about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
        <div class="top-scroll-bar"></div>
    
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="https://zubing.tk">Zubin`s Site</a>&nbsp;&nbsp;<a href="javascript:void(0);" class="theme-switch"><i class="fa fa-moon-o"></i></a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href=" /posts/" title="">Blog</a>
                
                <a class="menu-item" href=" /categories/" title="">Categories</a>
                
                <a class="menu-item" href=" /tags/" title="">Tags</a>
                
                <a class="menu-item" href=" /about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">2019北邮计算机学院新生颜值分析</h1>
        <div class="post-meta">
                
                <span class="post-time">
                <i class="fa fa-clock-o"></i>
                <time datetime=23089&#43;08-2323 itemprop="datePublished">August 23, 2019</time>
                </span>
                &nbsp;&nbsp;&nbsp;
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://zubing.tk/categories/toy/"> Toy </a>
                        
                </span>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="post-word-count"><i class="fa fa-file-word-o"></i>&nbsp;1297</span>
                &nbsp;&nbsp;&nbsp;&nbsp;<span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        
        
        
     
          
          
          

          
          
          

          

<p><strong>声明：为保护个人隐私，本博文不提供任何学生的个人信息。</strong></p>

<p>偶得管理员账号🤐，分析2019计算机学院迎新页面找到了新生头像存放位置，正好赋闲，于是花了半天功夫，作了个颜值分析，却“意外”有了惊人的发现！</p>

<blockquote>
<p>Talk is cheap. Show me the code.    - Linus Torvalds</p>
</blockquote>

<h2 id="头像爬取">头像爬取</h2>

<p>爬虫基于request，大致思路是模拟登陆 -&gt; 获取LT -&gt; 进入迎新页面获取头像访问权 -&gt; 按照学号逐个爬取头像</p>

<pre><code>#-*-coding=utf-8-*-
import os
import requests
import json
from http import cookiejar
from bs4 import BeautifulSoup as bs

s = requests.Session()
header = {'User-Agent':'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:46.0) Gecko/20100101 Firefox/46.0'}

def getLt(str):
    # 获取LT，相当于免再次登录的流水号，不可或缺
    lt = bs(str,'html.parser')
    dic = {}
    for inp in lt.form.find_all('input'):
        if(inp.get('name'))!=None:
            dic[inp.get('name')]=inp.get('value')
    return dic


def craw(num):
    base_url = &quot;*************&quot;  # 头像存储地址
    img_url = base_url + str(num)
    img_name = str(num)+'.jpg'
    img_path = os.path.abspath(&quot;.\\2019scs_face&quot;)
    img_save = img_path + &quot;\\&quot; + img_name
    if not os.path.isdir(img_path):
        os.makedirs(img_path)

    img_res = s.get(img_url, headers=header)
    img = img_res.content
    f = open(img_save, &quot;wb&quot;)
    f.write(img)
    f.close()
    print(&quot;image of %d saved&quot;%num)


def main():
    r = s.get('https://auth.bupt.edu.cn/authserver/login?service=http%3A%2F%2Fmy.bupt.edu.cn%2Findex.portal',headers=header)
    dic = getLt(r.text)
    postdata = {
        'username':'*************', #此处为管理员的账号，学生账号无法爬取头像
        'password':'*************', #密码
        'lt':dic['lt'],
        'execution':'e1s1',
        '_eventId':'submit',
        'rmShown':'1'
    }
    response_login = s.post('https://auth.bupt.edu.cn/authserver/login?service=http%3A%2F%2Fmy.bupt.edu.cn%2Findex.portal',data=postdata,headers=header)

    response2 = s.post('*************', data=postdata,headers=header) # 获得头像地址访问权
    # 大类：
    for num in range(**********, ***********): # 新手学号范围
        craw(num)
    # 智科：
    for num in range(**********, ***********): # 新手学号范围
        craw(num)

main()
</code></pre>

<p>一共爬取549个头像，按照学号保存。</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/08/23/vzR5ESUlCbOgdxB.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<h2 id="性别划分-颜值评估">性别划分 + 颜值评估</h2>

<p>使用了百度AI的<a href="https://ai.baidu.com/tech/face/detect" rel="nofollow noreferrer" target="_blank">人脸检测</a>v3版本的API，在管理控制台中创建应用，获取AppID、API Key和Secret Key：</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/08/23/2EboK5963dwvx8i.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<p>首先安装 baidu-aip :</p>

<pre><code>pip install baidu-aip
</code></pre>

<p>调用API分析下载的头像，分析后，按照性别分别保存，为了省事儿，直接将颜值得分加入文件名中，完整代码如下：</p>

<pre><code>#-*-coding=utf-8-*-
import time
import os
import base64

from PIL import Image
from aip import AipFace

# 定义常量
APP_ID = &quot;**********&quot;
API_KEY = &quot;**********&quot;
SECRET_KEY = &quot;**********&quot; 

# 初始化AipFace对象
aipFace = AipFace(APP_ID, API_KEY, SECRET_KEY)  

# 设置参数
options = {
    &quot;face_field&quot;: &quot;age,beauty,gender&quot;, 
    &quot;max_face_num&quot;: 1 ,
    &quot;face_type&quot;: &quot;CERT&quot;,
}

imageType = &quot;BASE64&quot;

#将图片进行base64编码，再url编码
def get_file_content(filePath):  
    with open(filePath, 'rb') as fp:  
        image =  fp.read()  
        image_data = base64.b64encode(image)
        return image_data.decode(&quot;utf-8&quot;)

def main():
    img_file = os.walk(&quot;.\\2019scs_face&quot;)
    for path,dir_list,file_list in img_file:
        for file_name in file_list:
            file_path = os.path.join(path, file_name)
            print(file_name)

            # 调用人脸属性检测接口 
            result = aipFace.detect(get_file_content(file_path),imageType,options)
            face_info = result['result']['face_list'][0]
            age = face_info['age']
            beauty = face_info['beauty']
            gender = face_info['gender']['type']
            print(gender, age, beauty)

            dir_ = &quot;.\\2019scs_face_done&quot;
            img = Image.open(file_path)
            if gender == 'male':
                img.save(dir_ + &quot;\\male\\&quot; + str(beauty) + '_'+ file_name)
            else:
                img.save(dir_ + &quot;\\female\\&quot; + str(beauty) + '_'+ file_name)
            print()
            time.sleep(0.5) # 降低调用频率，防止QPS超限额
main()
</code></pre>

<p>分析完成后，目测发现性别划分有5个划分出错（都是将妹子划分成汉子了🤣）。
因绝大多数新生照片拍摄环境恶劣，都是“清水出芙蓉，天然去雕饰”，而且AI评分很玄乎、准确度不高，所以呢&hellip;&hellip;</p>

<p>没多少人颜值分数及格。</p>

<hr />

<p>按照评分的数据显示：</p>

<ul>
<li>女生共120人，颜值最高分57.04，最低分9.37（？？？）</li>
<li>男生共429人，颜值最高分79.52，最低分30.86（！！！）</li>
</ul>

<p>为了更直观的展现新生的颜值，我们使用 Matplotlib 画下颜值分布图。</p>

<h2 id="颜值分布图">颜值分布图</h2>

<p>代码实现如下：</p>

<pre><code>import os
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

male = []
female = []

img_file = os.walk(&quot;.\\2019scs_face_done\\male&quot;)
for path,dir_list,file_list in img_file:
    for file_name in file_list:
        val = file_name.split('_')[0]
        male.append(float(val))

img_file = os.walk(&quot;.\\2019scs_face_done\\female&quot;)
for path,dir_list,file_list in img_file:
    for file_name in file_list:
        val = file_name.split('_')[0]
        female.append(float(val))

sns.kdeplot(male, bw=0.5, label=&quot;male&quot;)
sns.kdeplot(female, bw=0.5, label=&quot;female&quot;)
plt.title(&quot;Distribution of 2019SCS Face Score&quot;)
plt.xlabel(&quot;Face Score&quot;)
plt.ylabel(&quot;Probability&quot;)
plt.savefig(&quot;./Distribution.jpg&quot;)
plt.show()
</code></pre>

<p>展现出了下图：</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://i.loli.net/2019/08/23/SX2QiblgGPJEtf9.jpg" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<p>男生平均颜值53.15， 女生平均颜值36.91</p>

<h2 id="结果分析">结果分析</h2>

<p>女生颜值得分较低的原因很简单，百度人脸检测模型的训练数据来自互联网，而美图工具等的使用大大提高了网络照片的“颜值”（尤其是女性），导致模型的“审美阈值”过高，看到素颜、不加修饰的脸庞，颜值分数也就这么骨感了&hellip;（机器评分仅供参考）</p>

<p>这便有了所谓的证件照的悲剧。</p>

<p>同理，影视剧等里的男神女神们，也提高了我们的“审美阈值”，为我们灌输了不健康的审美标准，这直接导致了近年来求偶动力、结婚率乃至全球范围内生育率（来自vczh）的走低😱，也极大了降低了人们的幸福水平，值得警醒和反思。（严肃脸）</p>

<p><strong>参考</strong>：</p>

<ul>
<li><p><a href="https://ai.baidu.com/docs#/Face-Detect-V3/top" rel="nofollow noreferrer" target="_blank">https://ai.baidu.com/docs#/Face-Detect-V3/top</a></p></li>

<li><p><a href="https://zhuanlan.zhihu.com/p/34425618" rel="nofollow noreferrer" target="_blank">https://zhuanlan.zhihu.com/p/34425618</a></p></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>ZubinGou </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://zubing.tk/2019/scs_face/>https://zubing.tk/2019/scs_face/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                This work is under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">Creative Commons Attribution-NonCommercial 4.0 International License</a>
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://zubing.tk/tags/python/">
                    #Python</a></span>
            
            <span class="tag"><a href="https://zubing.tk/tags/crawler/">
                    #Crawler</a></span>
            
            <span class="tag"><a href="https://zubing.tk/tags/data-analysis/">
                    #Data Analysis</a></span>
            
            <span class="tag"><a href="https://zubing.tk/tags/bupt/">
                    #BUPT</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://zubing.tk">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://zubing.tk/2019/blog/" class="prev" rel="prev" title="零基础用 GitHub Pages &#43; Hugo 搭建个人网站"><i class="iconfont icon-left"></i>&nbsp;零基础用 GitHub Pages &#43; Hugo 搭建个人网站</a>
         
        
    </div>

    <div class="post-comment">
          
                 
          
          
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '295c3629bc24b2a35f82',
    clientSecret: '6f4bd7483a287d5b32c207b0ba6961de0094460a',
    repo: 'zubingou.github.io',
    owner: 'ZubinGou',
    admin: ['ZubinGou'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2019</span>
        
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://zubing.tk">ZubinGou</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>













    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
     </div>
  </body>
</html>
